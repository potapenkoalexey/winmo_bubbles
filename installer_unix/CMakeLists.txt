cmake_minimum_required(VERSION 3.16)

project(installer_unix VERSION ${PROJECT_VERSION})

set(WIX_INSTALLER_PLATFORM_NAME "WIN")

set(CMAKE_CURRENT_BINARY_DIR ${PROJECT_BINARY_DIR}/output)

# message(FATAL_ERROR ">>> ${PROJECT_NAME}")

set(CPACK_DEBIAN_PACKAGE_MAINTAINER "Alexey Potapenko")
set(CPACK_PROJECT_NAME "${PROJECT_NAME}")
set(CPACK_CMAKE_GENERATOR "Unix Makefiles")
set(CPACK_GENERATOR "DEB") #"STGZ;TGZ;TZ")
set(CPACK_INSTALL_CMAKE_PROJECTS "${CMAKE_SOURCE_DIR}/game;${CMAKE_SOURCE_DIR}/engine;CMake;ALL;/")
set(CPACK_NSIS_DISPLAY_NAME "CMake 2.5")
set(CPACK_OUTPUT_CONFIG_FILE "${CMAKE_CURRENT_BINARY_DIR}/CPackConfig.cmake")
# set(CPACK_PACKAGE_DESCRIPTION_FILE "/home/andy/vtk/CMake/Copyright.txt")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Match3 game")
set(CPACK_PACKAGE_EXECUTABLES "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/WinMoBubbles")
set(CPACK_PACKAGE_FILE_NAME "${GAME_NAME}")
set(CPACK_PACKAGE_INSTALL_DIRECTORY "CMake 2.5")
set(CPACK_PACKAGE_INSTALL_REGISTRY_KEY "CMake 2.5.0")
set(CPACK_PACKAGE_NAME "${GAME_NAME}")
set(CPACK_PACKAGE_VENDOR "GrottansBarn")
set(CPACK_PACKAGE_VERSION "${PROJECT_VERSION}")
set(CPACK_PACKAGE_VERSION_MAJOR "${PROJECT_VERSION_MAJOR}")
set(CPACK_PACKAGE_VERSION_MINOR "${PROJECT_VERSION_MINOR}")
set(CPACK_PACKAGE_VERSION_PATCH "${PROJECT_VERSION_PATCH}")
# set(CPACK_RESOURCE_FILE_LICENSE "/home/andy/vtk/CMake/Copyright.txt")
set(CPACK_RESOURCE_FILE_README "${CMAKE_SOURCE_DIR}/readme.md")
# set(CPACK_RESOURCE_FILE_WELCOME "/home/andy/vtk/CMake/Templates/CPack.GenericWelcome.txt")
set(CPACK_SOURCE_GENERATOR "TGZ")
set(CPACK_SOURCE_OUTPUT_CONFIG_FILE "${CMAKE_CURRENT_BINARY_DIR}/CPackSourceConfig.cmake")
set(CPACK_SOURCE_PACKAGE_FILE_NAME "cmake-2.5.0")
set(CPACK_STRIP_FILES "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/WinMoBubbles")
set(CPACK_SOURCE_STRIP_FILES "")
set(CPACK_SYSTEM_NAME "Linux x86_64")
set(CPACK_TOPLEVEL_TAG "Linux x86_64")

add_custom_target(installer-unix-ALL)

# message(FATAL_ERROR ">>> ${CMAKE_CURRENT_BINARY_DIR}/")

# cpack -G DEB
add_custom_target(RUN_CPACK_UNIX 
    COMMAND "cpack"
    WORKING_DIRECTORY ${PROJECT_BINARY_DIR}
    COMMENT "-- Run CPack for UNIX deb package build"
)

add_dependencies(installer-unix-ALL RUN_CPACK_UNIX)

include(CPack)